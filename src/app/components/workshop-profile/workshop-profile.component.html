<div class="workshop-profile-page">
  <!-- Loading State -->
  <div *ngIf="isLoadingProfile" class="profile-loading-overlay">
    <div class="loading-spinner"></div>
    <p>Loading workshop profile...</p>
  </div>

  <!-- Workshop Hero with Slider -->
  <div class="workshop-hero" *ngIf="!isLoadingProfile">
    <!-- Gallery Slider Cards (background) -->
    <div class="hero-slider-cards" *ngIf="photos.length > 0">
      <div
        *ngFor="let photo of photos; let i = index"
        class="hero-slider-card"
        [class.active]="i === currentImageIndex"
        [ngStyle]="getCardPosition(i)"
      >
        <div
          class="card-image"
          [style.background-image]="'url(' + buildAssetUrl(photo) + ')'"
        ></div>
      </div>
    </div>

    <!-- Default background when no photos -->
    <div
      class="hero-default-bg"
      *ngIf="photos.length === 0"
      [style.background-image]="'url(assets/images/workshop-hero.jpg)'"
    ></div>

    <div class="hero-overlay"></div>

    <div class="hero-content">
      <!-- Edit button - backend handles permissions -->
      <button class="hero-edit-btn" (click)="editProfile()" aria-label="Edit Workshop Profile">
        <svg
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" />
        </svg>
        Edit Profile
      </button>
      <div class="workshop-avatar">
        <img
          *ngIf="profileData.logoImageUrl"
          [src]="buildAssetUrl(profileData.logoImageUrl)"
          alt="{{ profileData.name }} logo"
          class="workshop-logo-img"
        />
        <span *ngIf="!profileData.logoImageUrl">{{ generateInitials(profileData.name) }}</span>
      </div>
      <div class="workshop-main-info">
        <div class="workshop-title-row">
          <h1 class="workshop-name">{{ profileData.name || 'Workshop Name' }}</h1>
          <svg
            *ngIf="profileData.verificationStatus === 'Verified'"
            class="verified-badge"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="#3b82f6"
          >
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <div class="workshop-meta">
          <div class="rating">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="#fbbf24">
              <path
                d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
              />
            </svg>
            <span class="rating-value">{{ profileData.rating || 0 }}</span>
            <span class="review-count">(0 reviews)</span>
          </div>
          <span class="separator">•</span>
          <span class="workshop-type">{{ profileData.workShopType || 'Workshop' }}</span>
          <span class="separator">•</span>
          <div class="location">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z" />
              <circle cx="12" cy="10" r="3" />
            </svg>
            {{ getLocation() }}
          </div>
        </div>
      </div>
    </div>

    <!-- Slider Controls (inside hero) -->
    <div class="hero-slider-controls" *ngIf="photos.length > 1">
      <!-- Thumbnail list - bottom right -->
      <div class="hero-thumbnails">
        <div
          *ngFor="let photo of photos; let i = index"
          class="hero-thumbnail-card"
          [class.active]="i === currentImageIndex"
          (click)="selectImage(i)"
        >
          <img [src]="buildAssetUrl(photo)" [alt]="'Thumb ' + (i + 1)" />
          <div class="hero-thumbnail-number">{{ i + 1 }}</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Sidebar -->
    <aside class="sidebar">
      <!-- Contact Card -->
      <div class="info-card contact-card">
        <div class="status-row" style="margin-bottom: 0.75rem">
          <div class="status-indicator" [class.closed]="!isWorkshopOpenNow()">
            <span class="status-dot"></span>
            <span class="status-text">{{ isWorkshopOpenNow() ? 'Open Now' : 'Closed' }}</span>
          </div>
        </div>

        <div class="contact-actions">
          <button class="contact-btn phone-btn" (click)="makePhoneCall()">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
              />
            </svg>
            {{ profileData.phoneNumber || 'Not provided' }}
          </button>

          <!-- Direct link when lat/lng are available -->
          <a
            class="contact-btn directions-btn"
            *ngIf="profileData?.latitude && profileData?.longitude"
            [href]="
              'https://www.google.com/maps/dir/?api=1&destination=' +
              profileData.latitude +
              ',' +
              profileData.longitude
            "
            target="_blank"
            rel="noopener noreferrer"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"
              />
            </svg>
            Get Directions
          </a>
          <!-- Fallback button when lat/lng are missing -->
          <button
            class="contact-btn directions-btn"
            *ngIf="!profileData?.latitude || !profileData?.longitude"
            (click)="getDirections()"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"
              />
            </svg>
            Get Directions
          </button>
        </div>

        <div
          class="contact-links"
          style="margin-top: 1rem; border-top: 1px solid #f3f4f6; padding-top: 1rem"
        >
          <div class="info-row">
            <span class="label">Website:</span>
            <a class="link" (click)="visitWebsite()">{{ profileData.website || 'Not provided' }}</a>
          </div>
          <div class="info-row" style="margin-top: 0.5rem">
            <span class="label">Email:</span>
            <a class="link" (click)="sendEmail()">{{ profileData.email || 'Not provided' }}</a>
          </div>
        </div>
      </div>

      <!-- About Workshop -->
      <div class="info-card about-card">
        <h3 class="card-title">About Workshop</h3>
        <p class="about-text">{{ profileData.description || 'No description provided yet.' }}</p>
        <div class="workshop-stats">
          <span class="stat-text">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"
              />
            </svg>
            Techs: {{ profileData.numbersOfTechnicians || 0 }}
          </span>
          <span class="stat-text">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"
              />
            </svg>
            Type: {{ profileData.workShopType || 'Not specified' }}
          </span>
        </div>
      </div>

      <!-- Working Hours -->
      <div class="info-card hours-card">
        <h3 class="card-title">Working Hours</h3>
        <div class="hours-list">
          <div
            class="hour-row"
            *ngFor="
              let day of [
                'Monday',
                'Tuesday',
                'Wednesday',
                'Thursday',
                'Friday',
                'Saturday',
                'Sunday'
              ]
            "
            [class.closed]="isWorkingHoursClosed(day)"
          >
            <span class="day-name">{{ day }}</span>
            <span class="day-hours">{{ formatWorkingHours(day) }}</span>
          </div>
        </div>
      </div>
    </aside>

    <!-- Content Area -->
    <main class="content-area">
      <!-- Tabs -->
      <div class="tabs">
        <button
          class="tab"
          [class.active]="selectedTab === 'services'"
          (click)="switchTab('services')"
        >
          Services Menu
        </button>
        <button
          class="tab"
          [class.active]="selectedTab === 'reviews'"
          (click)="switchTab('reviews')"
        >
          Reviews ({{ reviews.length }})
        </button>
      </div>

      <!-- Services Tab -->
      <div class="tab-content" *ngIf="selectedTab === 'services'">
        <!-- Enhanced Service Portfolio Header -->
        <div class="services-header-enhanced">
          <!-- Top Bar with Title and Quick Action -->
          <div class="header-top-bar">
            <div class="title-group">
              <h2 class="section-title-enhanced">
                <svg
                  class="title-icon"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"
                  />
                </svg>
                Service Portfolio
                <span class="badge-new" *ngIf="services.length === 0">NEW</span>
              </h2>
              <p class="section-subtitle-enhanced">
                Manage and showcase your workshop capabilities
              </p>
            </div>

            <button class="btn-add-service" (click)="openAddServiceModal()">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2.5"
              >
                <path d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
              </svg>
              <span>Add Service</span>
            </button>
          </div>

          <!-- Stats Bar -->
          <div class="stats-bar">
            <div class="stat-item">
              <div class="stat-icon-wrapper">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"
                  />
                </svg>
              </div>
              <div class="stat-details">
                <span class="stat-value">{{ services.length }}</span>
                <span class="stat-label">Active Services</span>
              </div>
            </div>

            <div class="stat-item">
              <div class="stat-icon-wrapper stat-icon-origins">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="12" cy="12" r="10" />
                  <line x1="2" y1="12" x2="22" y2="12" />
                  <path
                    d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                  />
                </svg>
              </div>
              <div class="stat-details">
                <span class="stat-value">{{ getUniqueOriginsCount() }}</span>
                <span class="stat-label">Car Origins</span>
              </div>
            </div>

            <div class="stat-item" *ngIf="services.length > 0">
              <div class="stat-icon-wrapper stat-icon-range">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="12" y1="1" x2="12" y2="23" />
                  <path d="M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6" />
                </svg>
              </div>
              <div class="stat-details">
                <span class="stat-value">{{ getPriceRange() }}</span>
                <span class="stat-label">Price Range</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Workshop Services Catalog Component -->
        <app-workshop-services-catalog
          *ngIf="!isLoadingProfile"
          [workshopId]="profileData?.id"
          (serviceEdited)="onServiceEdited($event)"
          (serviceDeleted)="onServiceDeleted($event)"
          (servicesLoaded)="onServicesLoaded($event)"
        ></app-workshop-services-catalog>

        <!-- Empty State (Shown by Catalog Component) -->
        <div
          *ngIf="!isLoadingProfile && (!profileData || !profileData.id)"
          class="empty-state-premium"
        >
          <div class="empty-content">
            <div class="empty-illustration">
              <div class="illustration-bg"></div>
              <svg
                width="80"
                height="80"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.5"
              >
                <path
                  d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"
                />
              </svg>
            </div>
            <div class="empty-text">
              <h3 class="empty-heading">Build Your Service Catalog</h3>
              <p class="empty-message">
                Create a professional portfolio of services to attract more customers and grow your
                business.
              </p>
            </div>
            <button class="btn-cta-primary" (click)="openAddServiceModal()">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2.5"
              >
                <path d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
              </svg>
              <span>Create Your First Service</span>
            </button>
            <div class="features-grid">
              <div class="feature-card">
                <div class="feature-icon">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      d="M3 7v4a1 1 0 001 1h3m0-5v10m0-10L4 3m3 4l3-4m10 18v-4a1 1 0 00-1-1h-3m0 5v-10m0 10l3 4m-3-4l-3 4"
                    />
                  </svg>
                </div>
                <div class="feature-text">
                  <h4>Smart Categorization</h4>
                  <p>200+ pre-configured services across 7 categories</p>
                </div>
              </div>
              <div class="feature-card">
                <div class="feature-icon">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
                <div class="feature-text">
                  <h4>Flexible Pricing</h4>
                  <p>Set custom price ranges and service durations</p>
                </div>
              </div>
              <div class="feature-card">
                <div class="feature-icon">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                </div>
                <div class="feature-text">
                  <h4>Car Specialization</h4>
                  <p>Specify expertise by vehicle origin and brand</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Reviews Tab -->
      <div class="tab-content" *ngIf="selectedTab === 'reviews'">
        <!-- Loading State -->
        <div class="reviews-loading" *ngIf="isLoadingReviews">
          <div class="loading-spinner"></div>
          <p>Loading reviews...</p>
        </div>

        <!-- Reviews Content -->
        <div class="reviews-content" *ngIf="!isLoadingReviews">
          <!-- Reviews Summary -->
          <div class="reviews-summary" *ngIf="reviews.length > 0">
            <div class="summary-left">
              <div class="big-rating-number">{{ averageRating.toFixed(1) }}</div>
              <div class="rating-stars-row">
                <ng-container *ngFor="let star of getStarArray(averageRating)">
                  <svg *ngIf="star === 1" width="18" height="18" viewBox="0 0 24 24" fill="#f59e0b">
                    <path
                      d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                    />
                  </svg>
                  <svg *ngIf="star === 0.5" width="18" height="18" viewBox="0 0 24 24">
                    <defs>
                      <linearGradient id="halfStarProfile">
                        <stop offset="50%" stop-color="#f59e0b" />
                        <stop offset="50%" stop-color="#e2e8f0" />
                      </linearGradient>
                    </defs>
                    <path
                      fill="url(#halfStarProfile)"
                      d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                    />
                  </svg>
                  <svg *ngIf="star === 0" width="18" height="18" viewBox="0 0 24 24" fill="#e2e8f0">
                    <path
                      d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                    />
                  </svg>
                </ng-container>
              </div>
              <div class="rating-meta">
                <span class="ratings-count">{{ reviews.length }} Reviews</span>
              </div>
            </div>

            <div class="summary-right">
              <div class="rating-bars-list">
                <div class="rating-bar-row" *ngFor="let bar of ratingBars">
                  <div class="bar-track-bg">
                    <div class="bar-fill-orange" [style.width.%]="bar.percentage"></div>
                  </div>
                  <span class="bar-star-label">{{ bar.stars }}.0</span>
                  <svg
                    class="bar-star-icon"
                    width="12"
                    height="12"
                    viewBox="0 0 24 24"
                    fill="#f59e0b"
                  >
                    <path
                      d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                    />
                  </svg>
                </div>
              </div>
            </div>
          </div>

          <!-- Reviews List -->
          <div class="reviews-list" *ngIf="reviews.length > 0">
            <div class="review-card" *ngFor="let review of reviews">
              <div class="review-header">
                <div class="reviewer-info">
                  <div class="reviewer-avatar">
                    <img
                      *ngIf="review.userAvatar"
                      [src]="review.userAvatar"
                      [alt]="review.userName"
                    />
                    <span *ngIf="!review.userAvatar">{{ review.userName.charAt(0) }}</span>
                  </div>
                  <div class="reviewer-details">
                    <span class="reviewer-name">{{ review.userName }}</span>
                    <span class="review-date">{{ review.date | date : 'mediumDate' }}</span>
                  </div>
                </div>
                <div class="review-rating">
                  <ng-container *ngFor="let star of getStarArray(review.rating)">
                    <svg
                      *ngIf="star === 1"
                      width="14"
                      height="14"
                      viewBox="0 0 24 24"
                      fill="#f59e0b"
                    >
                      <path
                        d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                      />
                    </svg>
                    <svg
                      *ngIf="star === 0"
                      width="14"
                      height="14"
                      viewBox="0 0 24 24"
                      fill="#e2e8f0"
                    >
                      <path
                        d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                      />
                    </svg>
                  </ng-container>
                </div>
              </div>
              <p class="review-comment">{{ review.comment }}</p>
              <div class="review-footer" *ngIf="review.paidAmount">
                <span class="review-service-cost">
                  <svg
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <line x1="12" y1="1" x2="12" y2="23" />
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
                  </svg>
                  Service: {{ review.paidAmount }} EGP
                </span>
              </div>
            </div>
          </div>

          <!-- Empty State -->
          <div class="reviews-empty" *ngIf="reviews.length === 0">
            <svg
              width="64"
              height="64"
              viewBox="0 0 24 24"
              fill="none"
              stroke="#9ca3af"
              stroke-width="1.5"
            >
              <path
                d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
              />
            </svg>
            <h3>No Reviews Yet</h3>
            <p>
              You haven't received any customer reviews yet. They will appear here once customers
              rate your services.
            </p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Booking Footer -->
  <div class="booking-footer" *ngIf="selectedServiceCount > 0">
    <div class="footer-content">
      <div class="estimate-info">
        <div class="estimate-label">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
            <line x1="16" y1="2" x2="16" y2="6" />
            <line x1="8" y1="2" x2="8" y2="6" />
            <line x1="3" y1="10" x2="21" y2="10" />
          </svg>
          <span>Total Estimate</span>
        </div>
        <div class="estimate-value">
          <span class="amount">{{ totalEstimate }}</span>
          <span class="currency">EGP</span>
        </div>
      </div>
      <div class="selected-info">
        <span class="selected-count">{{ selectedServiceCount }} Services</span>
      </div>
      <button class="book-btn" (click)="bookAppointment()">Book Appointment</button>
    </div>
  </div>
</div>

<!-- Error state -->
<div
  *ngIf="errorMessage"
  style="
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 400px;
    flex-direction: column;
    gap: 1rem;
  "
>
  <p style="color: #ef4444; font-size: 1.125rem">{{ errorMessage }}</p>
  <button class="btn btn-primary" (click)="loadWorkshopData()">Retry</button>
</div>

<!-- Add Service Modal -->
<app-add-service-modal
  #addServiceModal
  *ngIf="showAddServiceModal"
  [editingService]="editingService"
  (close)="closeAddServiceModal()"
  (servicesAdded)="handleServicesAdded($event)"
  (serviceUpdated)="handleServiceUpdated($event)"
></app-add-service-modal>

<!-- Floating Action Button for Add Service -->
<button
  *ngIf="profileData && profileData.id && selectedTab === 'services'"
  class="fab-add-service"
  (click)="openAddServiceModal()"
  title="Add Services"
>
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2.5"
  >
    <path d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
  </svg>
</button>
