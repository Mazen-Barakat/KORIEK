<div class="profile-page-container">

  <!-- Success Message -->
  <div class="alert alert-success" *ngIf="successMessage">
    <span class="alert-icon">âœ“</span>
    <span>{{ successMessage }}</span>
  </div>

  <!-- Error Message -->
  <div class="alert alert-error" *ngIf="error">
    <span class="alert-icon">!</span>
    <div>
      <p>{{ error }}</p>
      <button (click)="retryLoadProfile()" class="retry-btn">Retry</button>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>Loading your profile...</p>
  </div>

  <!-- Content Wrapper -->
  <div class="profile-content-wrapper" *ngIf="!isLoading && profile">
    
    <!-- Hero Stats Section -->
    <div class="hero-stats-section">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon-wrapper">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 17h-2v-6l2-5h9l4 5v6h-2"/>
              <circle cx="7" cy="17" r="2"/>
              <circle cx="17" cy="17" r="2"/>
            </svg>
          </div>
          <div class="stat-content">
            <div class="stat-value">{{ vehicleCount }}</div>
            <div class="stat-label">My Vehicles</div>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon-wrapper">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
              <line x1="16" y1="2" x2="16" y2="6"/>
              <line x1="8" y1="2" x2="8" y2="6"/>
              <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
          </div>
          <div class="stat-content">
            <div class="stat-value">{{ bookingCount }}</div>
            <div class="stat-label">Bookings</div>
          </div>
        </div>
        
        <div class="stat-card stat-card-featured">
          <div class="stat-icon-wrapper">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
            </svg>
          </div>
          <div class="stat-content">
            <div class="stat-value">{{ loyaltyPoints }}</div>
            <div class="stat-label">Loyalty Points</div>
          </div>
          <div class="stat-badge">Premium</div>
        </div>
      </div>
    </div>

    <!-- Profile Form -->
    <app-profile-form
      #formRef
      [profile]="profile"
      [isLoading]="isLoading"
      [isSaving]="isSaving"
      (onSubmit)="updateProfile($event)"
      (onImageChange)="handleImageChange($event)"
    ></app-profile-form>
  </div>
</div>
